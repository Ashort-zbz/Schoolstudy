# 4ã€Pythonæ•°æ®å¤„ç†

[TOC]

## 4.1ã€numpyæ•°ç»„æ“ä½œ 

### 4.1.1ã€numpyåº“æ¦‚è¿°

Pythonä¸­ç”¨**åˆ—è¡¨(list)**ä¿å­˜ä¸€ç»„å€¼ï¼Œå¯ç”¨æ¥å½“ä½œæ•°ç»„ä½¿ç”¨ï¼Œç”±äºåˆ—è¡¨çš„å…ƒç´ å¯ä»¥æ˜¯ä»»ä½•å¯¹è±¡ï¼Œå› æ­¤åˆ—è¡¨ä¸­æ‰€ä¿å­˜çš„æ˜¯å¯¹è±¡çš„æŒ‡é’ˆã€‚ä¸ºä¿å­˜ä¸€ä¸ªç®€å•çš„[1,2,3]ï¼Œéœ€è¦æœ‰3ä¸ªæŒ‡é’ˆå’Œä¸‰ä¸ªæ•´æ•°å¯¹è±¡ã€‚å¯¹äºæ•°å€¼è¿ç®—æ¥è¯´è¿™ç§ç»“æ„æ˜¾ç„¶æ¯”è¾ƒæµªè´¹å†…å­˜å’ŒCPUè®¡ç®—æ—¶é—´ã€‚

æ­¤å¤–Pythonè¿˜æä¾›äº†ä¸€ä¸ª**arrayæ¨¡å—**ï¼Œarrayå¯¹è±¡å’Œåˆ—è¡¨ä¸åŒï¼Œå®ƒç›´æ¥ä¿å­˜æ•°å€¼ï¼Œå’ŒCè¯­è¨€çš„ä¸€ç»´æ•°ç»„æ¯”è¾ƒç±»ä¼¼ã€‚ä½†æ˜¯ç”±äºå®ƒä¸æ”¯æŒå¤šç»´ï¼Œä¹Ÿæ²¡æœ‰å„ç§è¿ç®—å‡½æ•°ï¼Œå› æ­¤ä¹Ÿä¸é€‚åˆåšæ•°å€¼è¿ç®—ã€‚

**numpy** çš„è¯ç”Ÿå¼¥è¡¥äº†è¿™äº›ä¸è¶³ï¼Œnumpy æä¾› ndarrayï¼ˆN-dimensional array objectï¼‰å¯¹è±¡ï¼šndarray æ˜¯å­˜å‚¨å•ä¸€æ•°æ®ç±»å‹çš„å¤šç»´æ•°ç»„ã€‚

ä¸€ã€numpy åº“æ¦‚è¿°

1ã€numpyï¼ˆNumerical Python çš„ç®€ç§°ï¼‰æ˜¯é«˜æ€§èƒ½ç§‘å­¦è®¡ç®—å’Œæ•°æ®åˆ†æçš„åŸºç¡€åŒ…ï¼Œæ”¯æŒç»´åº¦æ•°ç»„ä¸çŸ©é˜µè¿ç®—ã€‚åŒ…æ‹¬ï¼š

- ä¸€ä¸ªå¼ºå¤§çš„Nç»´æ•°ç»„å¯¹è±¡ ndarrayï¼Œå…·æœ‰çŸ¢é‡ç®—æœ¯è¿ç®—å’Œå¤æ‚å¹¿æ’­èƒ½åŠ›çš„å¿«é€Ÿä¸”èŠ‚çœç©ºé—´çš„å¤šç»´æ•°ç»„ã€‚

- ç”¨äºå¯¹æ•´ç»„æ•°æ®è¿›è¡Œå¿«é€Ÿè¿ç®—çš„æ ‡å‡†æ•°å­¦å‡½æ•°ï¼ˆæ— éœ€ç¼–å†™å¾ªç¯ï¼‰ã€‚

- ç”¨äºè¯»å†™ç£ç›˜æ•°æ®çš„å·¥å…·ä»¥åŠç”¨äºæ“ä½œå†…å­˜æ˜ å°„æ–‡ä»¶çš„å·¥å…·ã€‚

- çº¿æ€§ä»£æ•°ã€éšæœºæ•°ç”Ÿæˆä»¥åŠå‚…é‡Œå¶å˜æ¢ç­‰åŠŸèƒ½ã€‚

- ç”¨äºé›†æˆç”± C ã€C++ ã€Fortranç­‰è¯­è¨€ç¼–å†™çš„ä»£ç çš„å·¥å…·ã€‚

2ã€numpy åº“æä¾›äº†å¤§é‡çš„åº“å‡½æ•°å’Œæ“ä½œï¼Œå¯ä»¥å¸®åŠ©ç¨‹åºå‘˜è½»æ¾åœ°è¿›è¡Œæ•°å€¼è®¡ç®—ã€‚è¿™ç±»æ•°å€¼è®¡ç®—å¹¿æ³›ç”¨äºä»¥ä¸‹ä»»åŠ¡ï¼š

- æœºå™¨å­¦ä¹ æ¨¡å‹ï¼šåœ¨ç¼–å†™æœºå™¨å­¦ä¹ ç®—æ³•æ—¶ï¼Œéœ€è¦å¯¹çŸ©é˜µè¿›è¡Œå„ç§æ•°å€¼è®¡ç®—ã€‚ä¾‹å¦‚çŸ©é˜µä¹˜æ³•ã€åŠ æ³•ç­‰ã€‚ä½¿ç”¨ numpy åº“å¯è¿›è¡Œç®€å•(åœ¨ç¼–å†™ä»£ç æ–¹é¢)å’Œå¿«é€Ÿ(åœ¨é€Ÿåº¦æ–¹é¢)è®¡ç®—ã€‚numpy æ•°ç»„ç”¨äºå­˜å‚¨è®­ç»ƒæ•°æ®å’Œæœºå™¨å­¦ä¹ æ¨¡å‹çš„å‚æ•°ã€‚

- å›¾åƒå¤„ç†å’Œè®¡ç®—æœºå›¾å½¢å­¦ï¼šè®¡ç®—æœºä¸­çš„å›¾åƒè¡¨ç¤ºä¸ºå¤šç»´æ•°å­—æ•°ç»„ï¼Œnumpy æä¾›äº†ä¸€äº›ä¼˜ç§€çš„åº“å‡½æ•°æ¥å¿«é€Ÿå¤„ç†å›¾åƒã€‚ä¾‹å¦‚ï¼Œé•œåƒå›¾åƒã€æŒ‰ç‰¹å®šè§’åº¦æ—‹è½¬å›¾åƒç­‰ã€‚

- æ•°å­¦ä»»åŠ¡ï¼šnumpy å¯è¿›è¡Œæ•°å€¼ç§¯åˆ†ã€å¾®åˆ†ã€å†…æ’ã€å¤–æ¨ç­‰æ“ä½œã€‚numpy åº“å½¢æˆäº†ä¸€ç§åŸºäºPythonçš„MATLABçš„å¿«é€Ÿæ›¿ä»£ã€‚

### 4.1.2ã€ndarrayæ•°ç»„æ“ä½œ

ä¸€ã€ndarray æ¦‚è¿°

N ç»´æ•°ç»„å¯¹è±¡ ndarray æ˜¯ç”¨äºå­˜æ”¾åŒç±»å‹å…ƒç´ çš„å¤šç»´æ•°ç»„ã€‚

ndarray ä¸­çš„æ¯ä¸ªå…ƒç´ åœ¨å†…å­˜ä¸­éƒ½æœ‰ç›¸åŒå­˜å‚¨å¤§å°çš„åŒºåŸŸï¼Œæ¯ä¸ªå…ƒç´ æ˜¯æ•°æ®ç±»å‹å¯¹è±¡çš„å¯¹è±¡ ï¼ˆ ç§°ä¸º dtypeï¼‰ã€‚ä¸ Python ä¸­çš„å…¶ä»–å®¹å™¨å¯¹è±¡ä¸€æ ·ï¼Œå¯ä»¥é€šè¿‡å¯¹æ•°ç»„è¿›è¡Œç´¢å¼•æˆ–åˆ‡ç‰‡ã€‚ å¯é€šè¿‡ ndarray çš„æ–¹æ³•å’Œå±æ€§æ¥è®¿é—®å’Œä¿®æ”¹ ndarray çš„å†…å®¹ ã€‚

äºŒã€åˆ›å»ºæ•°ç»„

åˆ›å»ºndarrayï¼šåˆ›å»ºæ•°ç»„æœ€ç®€å•çš„åŠæ³•å°±æ˜¯ä½¿ç”¨arrayå‡½æ•°ã€‚å®ƒæ¥å—ä¸€åˆ‡åºåˆ—å‹çš„å¯¹è±¡ï¼Œç„¶åäº§ç”Ÿä¸€ä¸ªå«æœ‰ä¼ å…¥æ•°æ®çš„ numpy æ•°ç»„ã€‚å…¶ä¸­ï¼ŒåµŒå¥—åºåˆ—ï¼ˆæ¯”å¦‚ç”±ä¸€ç»„ç­‰é•¿åˆ—è¡¨ç»„æˆçš„åˆ—è¡¨ï¼‰å°†ä¼šè¢«è½¬æ¢ä¸ºä¸€ä¸ªå¤šç»´æ•°ç»„

```python
numpy.array(object, dtype = None, copy = True, order = None, subok = False, ndmin = 0)

>>> import numpy as np
>>> a = [1, 2, 3, 4] # åˆ›å»ºç®€å•çš„åˆ—è¡¨
>>> b = np.array(a) # å°†åˆ—è¡¨è½¬æ¢ä¸ºæ•°ç»„
>>> b
array([1, 2, 3, 4])
>>> c = np.array([[1, 2], [3, 4]])
>>>c
[[1, 2]
[3, 4]]
```

<img src="https://upload-images.jianshu.io/upload_images/19680844-9a02abd5239d8d61.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:80%;" />

é™¤äº† np.array ä¹‹å¤–ï¼Œè¿˜æœ‰ä¸€äº›å‡½æ•°ä¹Ÿå¯ä»¥æ–°å»ºæ•°ç»„ï¼š `zeros`å’Œ`ones`åˆ†åˆ«å¯ä»¥åˆ›å»ºæŒ‡å®šé•¿åº¦æˆ–è€…å½¢çŠ¶çš„å…¨0æˆ–å…¨1æ•°ç»„ã€‚`empty`å¯ä»¥åˆ›å»ºä¸€ä¸ªæ²¡æœ‰ä»»ä½•å…·ä½“å€¼çš„æ•°ç»„

```python
>>> np.zeros(3) # å…¨0ä¸€ç»´æ•°ç»„
array([ 0., 0., 0.])
>>> np.ones(3) # å…¨1ä¸€ç»´æ•°ç»„
array([ 1., 1., 1.])
>>> np.zeros((3,3)) # å…¨0äºŒç»´æ•°ç»„ï¼Œ3è¡Œ3åˆ—
array([[ 0., 0., 0.],
[ 0., 0., 0.],
[ 0., 0., 0.]])
>>> np.zeros((3,1)) # å…¨0äºŒç»´æ•°ç»„ï¼Œ3è¡Œ1åˆ—
array([[ 0.],
[ 0.],
[ 0.]])
>>> np.zeros((1,3)) # å…¨0äºŒç»´æ•°ç»„ï¼Œ1è¡Œ3åˆ—
array([[ 0., 0., 0.]])
>>> np.ones((3,3)) # å…¨1äºŒç»´æ•°ç»„ï¼Œ3è¡Œ3åˆ—
array([[ 1., 1., 1.],
[ 1., 1., 1.],
[ 1., 1., 1.]])
>>> np.ones((1,3)) # å…¨1äºŒç»´æ•°ç»„ï¼Œ1è¡Œ3åˆ—
array([[ 1., 1., 1.]])
>>> np.identity(3) # å•ä½çŸ©é˜µï¼Œ3è¡Œ3åˆ—
array([[ 1., 0., 0.],
[ 0., 1., 0.],
[ 0., 0., 1.]])
```

åˆ›å»ºéšæœºæ•°ç»„

```python
# å‡åŒ€åˆ†å¸ƒ
np.random.rand(10, 10) #åˆ›å»ºæŒ‡å®šå½¢çŠ¶(ç¤ºä¾‹ä¸º10è¡Œ10åˆ—)çš„æ•°ç»„(èŒƒå›´åœ¨0è‡³1ä¹‹é—´)
np.random.uniform(0, 100) #åˆ›å»ºæŒ‡å®šèŒƒå›´å†…çš„ä¸€ä¸ªæ•°
np.random.randint(0, 100) #åˆ›å»ºæŒ‡å®šèŒƒå›´å†…çš„ä¸€ä¸ªæ•´æ•°

#æ­£æ€åˆ†å¸ƒ
np.random.normal(1.75, 0.1, (2, 3)) #ç»™å®šå‡å€¼/æ ‡å‡†å·®/ç»´åº¦çš„æ­£æ€åˆ†å¸ƒ

>>> np.random.randint(0, 50, 5) # éšæœºæ•°ç»„ï¼Œ5ä¸ª0åˆ°50ä¹‹é—´çš„æ•°å­—
array([13, 47, 31, 26, 9])
>>> np.random.randint(0, 50, (3,5)) # 3è¡Œ5åˆ—ï¼Œå…±15ä¸ªéšæœºæ•´æ•°ï¼Œéƒ½ä»‹äº[0,50]
array([[44, 34, 35, 28, 18],
[24, 24, 26, 4, 21],
[30, 40, 1, 24, 17]])
>>> np.random.rand(10) # 10ä¸ªä»‹äº[0,1)çš„éšæœºæ•°
array([ 0.58193552, 0.11106142, 0.13848858, 0.61148304, 0.72031503,
0.12807841, 0.49999167, 0.24124012, 0.15236595, 0.54568207])
>>> np.random.standard_normal(5) # ä»æ ‡å‡†æ­£æ€åˆ†å¸ƒä¸­éšæœºé‡‡æ ·5ä¸ªæ•°å­—
array([2.82669067, 0.9773194, -0.72595951, -0.11343254, 0.74813065])
```

ä¸‰ã€æ•°ç»„å±æ€§

æŸ¥çœ‹æ•°ç»„å±æ€§çš„ç”¨æ³•

<img src="https://upload-images.jianshu.io/upload_images/19680844-7d9ec797f10554c0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:80%;" />

```python
import numpy as np

x = np.array([(1,2,3),(4,5,6)])
print(x)
print(x.size)
print(x.ndim)
print(x.shape)
print(x.itemsize)
print(x.dtype,'\n')

y = x.reshape(3,2)
print(y,'\n')
print(y.shape)
```

ä¸‰ã€æ•°ç»„å’Œæ ‡é‡ä¹‹é—´çš„è¿ç®—

æ•°ç»„å¾ˆé‡è¦ï¼Œå› ä¸ºå®ƒå¯ä»¥ä½¿æˆ‘ä»¬ä¸ç”¨ç¼–å†™å¾ªç¯å³å¯å¯¹æ•°æ®æ‰§è¡Œæ‰¹é‡è¿ç®—ã€‚è¿™é€šå¸¸å«åš**çŸ¢é‡åŒ–**ï¼ˆvectorizationï¼‰ã€‚å¤§å°ç›¸ç­‰çš„æ•°ç»„ä¹‹é—´çš„ä»»ä½•ç®—æœ¯è¿ç®—éƒ½ä¼šå°†è¿ç®—åº”ç”¨åˆ°å…ƒç´ çº§ã€‚åŒæ ·ï¼Œæ•°ç»„ä¸æ ‡é‡çš„ç®—æœ¯è¿ç®—ä¹Ÿä¼šå°†é‚£ä¸ªæ ‡é‡å€¼ä¼ æ’­åˆ°å„ä¸ªå…ƒç´ ã€‚

```python
>>> arr = np.array([[1., 2., 3.], [4., 5., 6.]])
>>> arr
array([[1., 2., 3.],
[4., 5., 6.]])

>>> arr - arr
array([[0., 0., 0.],
[0., 0., 0.]])

>>> arr * arr
array([[ 1., 4., 9.],
[16., 25., 36.]])

>>> 1 / arr
array([[1. , 0.5 , 0.33333333],
[0.25 , 0.2 , 0.16666667]])

>>> arr ** 0.5
array([[1. , 1.41421356, 1.73205081],
[2. , 2.23606798, 2.44948974]])
```

å››ã€åŸºæœ¬çš„ç´¢å¼•å’Œåˆ‡ç‰‡

é€‰å–æ•°æ®å­é›†æˆ–çš„å•ä¸ªå…ƒç´ çš„æ–¹å¼æœ‰å¾ˆå¤šã€‚ä¸€ç»´æ•°ç»„å¾ˆç®€å•ï¼Œä»è¡¨é¢ä¸Šçœ‹ï¼Œå®ƒä»¬è·ŸPythonåˆ—è¡¨çš„åŠŸèƒ½å·®ä¸å¤šã€‚ ä¸€ç»´æ•°ç»„è·Ÿåˆ—è¡¨æœ€é‡è¦çš„åŒºåˆ«åœ¨äºï¼Œ**æ•°ç»„åˆ‡ç‰‡æ˜¯åŸå§‹æ•°ç»„çš„è§†å›¾ã€‚è¿™æ„å‘³ç€æ•°æ®ä¸ä¼šè¢«å¤åˆ¶ï¼Œæ•°ç»„è§†å›¾ä¸Šçš„ä»»ä½•ä¿®æ”¹éƒ½ä¼šç›´æ¥åæ˜ åˆ°åŸå§‹æ•°ç»„ä¸Š**ã€‚ å°†ä¸€ä¸ªæ ‡é‡å€¼èµ‹å€¼ç»™ä¸€ä¸ªåˆ‡ç‰‡æ—¶ï¼Œè¯¥å€¼ä¼šè‡ªåŠ¨ä¼ æ’­åˆ°æ•´ä¸ªé€‰åŒºã€‚

```python
>>> arr = np.arange(10)
>>> arr
array([0, 1, 2, 3, 4, 5, 6, 7, 8, 9])
>>> arr[5]
5
>>> arr[5:8]
array([5, 6, 7])
>>> arr[5:8] = 12
>>> arr
array([ 0, 1, 2, 3, 4, 12, 12, 12, 8, 9])
>>> arr_slice = arr[5:8]
>>> arr_slice[1] = 12345
>>> arr
array([ 0, 1, 2, 3, 4, 12, 12345, 12, 8, 9])
>>> arr_slice[:] = 64
>>> arr
array([ 0, 1, 2, 3, 4, 64, 64, 64, 8, 9])
```

 åœ¨äºŒç»´æ•°ç»„ä¸­ï¼Œå„ç´¢å¼•ä½ç½®ä¸Šçš„å…ƒç´ ä¸å†æ˜¯æ ‡é‡**è€Œæ˜¯ä¸€ç»´æ•°ç»„**ã€‚å¯ä»¥å¯¹å„ä¸ªå…ƒç´ è¿›è¡Œé€’å½’è®¿é—®ï¼Œä½†æ˜¯è¿™æ ·æœ‰ç‚¹éº»çƒ¦ã€‚è¿˜æœ‰ä¸€ç§æ–¹å¼æ˜¯ä¼ å…¥ä¸€ä¸ªä»¥é€—å·éš”å¼€çš„ç´¢å¼•åˆ—è¡¨æ¥é€‰å–å•ä¸ªå…ƒç´ ã€‚ åœ¨å¤šç»´æ•°ç»„ä¸­ï¼Œå¦‚æœçœç•¥äº†åé¢çš„ç´¢å¼•ï¼Œåˆ™è¿”å›å¯¹è±¡ä¼šæ˜¯ä¸€ä¸ªç»´åº¦ä½ä¸€ç‚¹çš„ndarrayã€‚

```python
>>> arr3d = np.array([[[1, 2, 3], [4, 5, 6]], [[7, 8, 9], [10, 11, 12]]])
>>> arr3d
array([[[ 1, 2, 3],
[ 4, 5, 6]],
[[ 7, 8, 9],
[10, 11, 12]]])

>>> arr3d[0]
array([[1, 2, 3],
[4, 5, 6]])

>>> arr3d[0][1]
array([4, 5, 6])
```

äº”ã€æ•°å­¦å’Œç»Ÿè®¡æ–¹æ³•

åŸºæœ¬æ•°ç»„ç»Ÿè®¡æ–¹æ³•ï¼šå¯ä»¥é€šè¿‡æ•°ç»„ä¸Šçš„ä¸€ç»„æ•°å­¦å‡½æ•°å¯¹æ•´ä¸ªæ•°ç»„æˆ–æŸä¸ªè½´å‘çš„æ•°æ®è¿›è¡Œç»Ÿè®¡è®¡ç®—

![image.png](https://upload-images.jianshu.io/upload_images/19680844-559bf2eb62eafdac.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

 sumã€meanä»¥åŠæ ‡å‡†å·® std ç­‰èšåˆè®¡ç®—æ—¢å¯ä»¥å½“åšæ•°ç»„çš„å®ä¾‹æ–¹æ³•è°ƒç”¨ï¼Œä¹Ÿå¯ä»¥å½“åšé¡¶çº§ numpy å‡½æ•°ä½¿ç”¨

```python
>>> arr = np.random.randn(5, 4) # 5è¡Œ4åˆ—æ­£æ€åˆ†å¸ƒçš„éšæœºæ•°æ®
>>> arr
[[-0.60229958 -0.92406191  0.09197369 -0.91053619]
 [-0.72041789  0.94189353  0.42806243 -0.39083685]
 [-1.90479946 -1.87341081 -0.51652843 -0.23153911]
 [ 0.11257244  0.35318805 -0.10814888  1.99341926]
 [-0.97445142  0.6588353   1.06432084 -0.17708965]]
>>> arr.mean()
-0.022341797127577216
>>> np.mean(arr)
-0.022341797127577216
>>> arr.sum()
-0.44683594255154435
```

mean å’Œ sum è¿™ç±»çš„å‡½æ•°å¯ä»¥æ¥å—ä¸€ä¸ª axis å‚æ•°ï¼ˆç”¨äºè®¡ç®—è¯¥è½´å‘ä¸Šçš„ç»Ÿè®¡å€¼ï¼‰ã€‚

```python
>>> arr.mean(axis=1)'''axis=1ï¼Œè¡¨ç¤ºæŒ‰æ°´å¹³æ–¹å‘è®¡ç®—ï¼Œè®¡ç®—æ¯ä¸€è¡Œçš„ç»Ÿè®¡å€¼,ç›¸åaxis=0ï¼Œè¡¨ç¤ºæŒ‰å‚ç›´æ–¹å‘è®¡ç®—ï¼Œè®¡ç®—æ¯ä¸€åˆ—çš„ç»Ÿè®¡å€¼'''
array([-0.11320162, -0.032351 , -0.24522299, 0.13275031, 0.14631631])
>>> arr.sum(0)
array([-1.71093252, 3.4431099 , -1.78081725, -0.39819607])
```

`cumsum`ï¼šæŒ‰ç…§æ‰€ç»™å®šçš„è½´å‚æ•°è¿”å›å…ƒç´ çš„æ¢¯å½¢ç´¯è®¡å’Œï¼Œaxis=0ï¼ŒæŒ‰ç…§è¡Œç´¯åŠ ã€‚axis=1ï¼Œ
æŒ‰ç…§åˆ—ç´¯åŠ ã€‚

`cumprod`ï¼šæŒ‰ç…§æ‰€ç»™å®šçš„è½´å‚æ•°è¿”å›å…ƒç´ çš„æ¢¯å½¢ç´¯è®¡ä¹˜ç§¯ï¼Œaxis=0ï¼ŒæŒ‰ç…§è¡Œç´¯ç§¯ã€‚
axis=1ï¼ŒæŒ‰ç…§åˆ—ç´¯ç§¯ã€‚

```python
>>> arr = np.array([[0, 1 ,2], [3, 4, 5], [6, 7, 8]])
>>> arr.cumsum(0)
array([[ 0, 1, 2],
[ 3, 5, 7],
[ 9, 12, 15]], dtype=int32)
>>> arr.cumprod(1)
array([[ 0, 0, 0],
[ 3, 12, 60],
[ 6, 42, 336]], dtype=int32)
```

## 4.2ã€numpyçŸ©é˜µæ“ä½œ

### 4.2.1ã€çŸ©é˜µç”Ÿæˆ

ä¸€ã€numpyçŸ©é˜µåº“(Matrix)

NumPy ä¸­åŒ…å«äº†ä¸€ä¸ªçŸ©é˜µåº“ numpy.matlibï¼Œè¯¥æ¨¡å—ä¸­çš„å‡½æ•°**è¿”å›çš„æ˜¯ä¸€ä¸ªçŸ©é˜µ**ï¼Œè€Œä¸æ˜¯ ndarray å¯¹è±¡ã€‚

ä¸€ä¸ª ğ‘›xğ‘œ çš„çŸ©é˜µæ˜¯ä¸€ä¸ªç”± ğ‘›è¡Œï¼ˆrowï¼‰ğ‘œ åˆ—ï¼ˆcolumnï¼‰å…ƒç´ æ’åˆ—æˆçš„çŸ©å½¢é˜µåˆ—ã€‚çŸ©é˜µé‡Œçš„å…ƒç´ å¯ä»¥æ˜¯æ•°å­—ã€ç¬¦å·æˆ–æ•°å­¦å¼ã€‚NumPy å’Œ Matlab ä¸ä¸€æ · ï¼Œ å¯¹äºå¤šç»´æ•°ç»„çš„è¿ç®— ï¼Œ ç¼ºçœæƒ…å†µä¸‹å¹¶ä¸ä½¿ç”¨çŸ©é˜µè¿ç®— ï¼Œå¦‚æœä½ å¸Œæœ›å¯¹æ•°ç»„è¿›è¡ŒçŸ©é˜µè¿ç®—çš„è¯ ï¼Œ å¯ä»¥è°ƒç”¨ndarryå¯¹è±¡ç›¸åº”çš„å‡½æ•°ã€‚

äºŒã€numpy çŸ©é˜µç”Ÿæˆ

1ã€å¸¸è§„æ–¹å¼ç”Ÿæˆ

```python
import numpy as np

x = np.matrix([[1,2,3], [4,5,6]])
y = np.matrix([1,2,3,4,5,6])
# x[0,0]è¿”å›è¡Œä¸‹æ ‡å’Œåˆ—ä¸‹æ ‡éƒ½ä¸º0çš„å…ƒç´ 
# æ³¨æ„ï¼Œå¯¹äºçŸ©é˜µxæ¥è¯´ï¼Œx[0,0]å’Œx[0][0]çš„å«ä¹‰ä¸ä¸€æ ·
print(x, y, x[0,0],x[0][0],sep='\n\n')
```

2ã€numpy çŸ©é˜µç”Ÿæˆï¼š`numpy.matlib.empty(shape, dtype, order)`ï¼Œ shape: å®šä¹‰æ–°çŸ©é˜µå½¢çŠ¶çš„æ•´æ•°æˆ–æ•´æ•°å…ƒç»„ï¼› Dtype: å¯é€‰ï¼Œæ•°æ®ç±»å‹ï¼›order: Cï¼ˆè¡Œåºä¼˜å…ˆï¼‰ æˆ–è€… Fï¼ˆåˆ—åºä¼˜å…ˆï¼‰

```python
import numpy.matlib
import numpy as np
print (np.matlib.empty((2,2)))
# å¡«å……ä¸ºéšæœºæ•°æ®

[[ 0.00000000e+000 -7.70820675e-313]
[ 1.23331308e-311 6.83927731e-309]]
```

`numpy.matlib.zeros()`â€”â€”åˆ›å»ºä¸€ä¸ªä»¥0å¡«å……çš„çŸ©é˜µã€‚

`numpy.matlib.ones()`â€”â€”åˆ›å»ºä¸€ä¸ªä»¥1å¡«å……çš„çŸ©é˜µã€‚

`numpy.matlib.eye(n, M, k, dtype)`â€”â€”è¿”å›ä¸€ä¸ªçŸ©é˜µï¼Œ**å¯¹è§’çº¿å…ƒç´ ä¸º 1ï¼Œå…¶ä»–ä½ç½®ä¸ºé›¶**ã€‚ n: è¿”å›çŸ©é˜µçš„è¡Œæ•°ã€‚M: è¿”å›çŸ©é˜µçš„åˆ—æ•°ï¼Œé»˜è®¤ä¸º nã€‚ k: å¯¹è§’çº¿çš„ç´¢å¼•ã€‚dtype: æ•°æ®ç±»å‹ã€‚

`numpy.matlib.identity()`â€”â€”è¿”å›ç»™å®šå¤§å°çš„**å•ä½çŸ©é˜µ**ã€‚å•ä½çŸ©é˜µæ˜¯ä¸ªæ–¹é˜µï¼Œä»å·¦ä¸Šè§’åˆ°å³ä¸‹è§’çš„å¯¹è§’çº¿ï¼ˆç§°ä¸ºä¸»å¯¹è§’çº¿ï¼‰ä¸Šçš„å…ƒç´ å‡ä¸º 1ï¼Œé™¤æ­¤ä»¥å¤–å…¨éƒ½ä¸º 0ã€‚

`numpy.matlib.rand()`â€”â€”åˆ›å»ºä¸€ä¸ªç»™å®šå¤§å°çš„çŸ©é˜µï¼Œ**æ•°æ®æ˜¯éšæœºå¡«å……çš„**ã€‚

### 4.2.2ã€å¸¸ç”¨çŸ©é˜µæ“ä½œ 

ä¸€ã€numpy çŸ©é˜µå¸¸ç”¨æ“ä½œ

1ã€çŸ©é˜µä¸äºŒç»´æ•°ç»„ç›¸äº’è½¬æ¢ï¼Œã€‚

çŸ©é˜µæ€»æ˜¯äºŒç»´çš„ï¼Œè€Œ ndarray æ˜¯ä¸€ä¸ª n ç»´æ•°ç»„ã€‚ ä¸¤ä¸ªå¯¹è±¡éƒ½æ˜¯å¯äº’æ¢çš„ã€‚

```python
import numpy.matlib
import numpy as np

i = np.matrix('1,2;3,4')
print(i)
j = np.asarray(i)
print(j)
k = np.asmatrix (j)
print (k)
```

2ã€çŸ©é˜µè½¬ç½®

```python
import numpy as np

x = np.matrix([[1,2,3], [4,5,6]])
y = np.matrix([1,2,3,4,5,6])
print(x.T, y.T, sep='\n\n')
```

3ã€æŸ¥çœ‹çŸ©é˜µç‰¹å¾

```python
import numpy as np
x = np.matrix([[1,2,3], [4,5,6]])
print(x.mean(), end='\n====\n') # æ‰€æœ‰å…ƒç´ å¹³å‡å€¼

print(x.mean(axis=0), end='\n====\n') # çºµå‘å¹³å‡å€¼
print(x.mean(axis=0).shape, end='\n====\n')
print(x.mean(axis=1), end='\n====\n') # æ¨ªå‘å¹³å‡å€¼
print(x.sum(), end='\n====\n') # æ‰€æœ‰å…ƒç´ ä¹‹å’Œ
print(x.max(axis=1), end='\n====\n') # æ¨ªå‘æœ€å¤§å€¼
print(x.argmax(axis=1), end='\n====\n') # æ¨ªå‘æœ€å¤§å€¼çš„ä¸‹æ ‡
print(x.diagonal(), end='\n====\n') # å¯¹è§’çº¿å…ƒç´ 
```

4ã€çŸ©é˜µä¹˜æ³•

```python
import numpy as np
x = np.matrix([[1,2,3], [4,5,6]])
y = np.matrix([[1,2], [3,4], [5,6]])
print(x*y)
```

### 4.2.3ã€çŸ©é˜µè¿ç®—

numpy.linalg  ä¸­æœ‰ä¸€ç»„æ ‡å‡†çš„çŸ©é˜µåˆ†è§£è¿ç®—ä»¥åŠè¯¸å¦‚æ±‚é€†å’Œè¡Œåˆ—å¼ä¹‹ç±»çš„ä¸œè¥¿ã€‚å®ƒä»¬è·Ÿ MATLAB å’Œ R ç­‰è¯­è¨€æ‰€ä½¿ç”¨çš„æ˜¯ç›¸åŒçš„è¡Œä¸šæ ‡å‡†çº§ Fortran åº“ã€‚ä¸‹è¾¹ä¸ºå¸¸ç”¨çš„ numpy.linalg å‡½æ•°ï¼š

<img src="https://upload-images.jianshu.io/upload_images/19680844-1e6b586333531f25.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:60%;" />

`numpy.dot(a, b, out)`ï¼š **ä¸¤ä¸ªæ•°ç»„çš„ç‚¹ç§¯**ï¼Œå³**å…ƒç´ å¯¹åº”ç›¸ä¹˜**ã€‚ aï¼šndarray æ•°ç»„ã€‚ b : ndarray æ•°ç»„ã€‚ out : ndarray, å¯é€‰ï¼Œç”¨æ¥ä¿å­˜dot()çš„è®¡ç®—ç»“æœã€‚ å¯¹äºä¸¤ä¸ªä¸€ç»´çš„æ•°ç»„ï¼Œè®¡ç®—çš„æ˜¯è¿™ä¸¤ä¸ªæ•°ç»„å¯¹åº”ä¸‹æ ‡å…ƒç´ çš„ä¹˜ç§¯å’Œ(æ•°å­¦ä¸Šç§°ä¹‹ä¸ºå†…ç§¯)ï¼› å¯¹äºäºŒç»´æ•°ç»„ï¼Œè®¡ç®—çš„æ˜¯ä¸¤ä¸ªæ•°ç»„çš„çŸ©é˜µä¹˜ç§¯ï¼›å¯¹äºå¤šç»´æ•°ç»„ï¼Œå®ƒçš„é€šç”¨è®¡ç®—å…¬å¼å¦‚ä¸‹ï¼Œå³ç»“æœæ•°ç»„ä¸­çš„æ¯ä¸ªå…ƒç´ éƒ½æ˜¯ï¼šæ•°ç»„açš„æœ€åä¸€ç»´ä¸Šçš„æ‰€æœ‰å…ƒç´ ä¸æ•°ç»„bçš„å€’æ•°ç¬¬äºŒä½ä¸Šçš„æ‰€æœ‰å…ƒç´ çš„ä¹˜ç§¯å’Œï¼š

` dot(a, b)[i,j,k,m] = sum(a[i,j,:] * b[k,:,m])`

```python
import numpy.matlib
import numpy as np

a = np.array([[1,2],[3,4]])
b = np.array([[11,12],[13,14]])
print(np.dot(a,b))

[[1*11+2*13, 1*12+2*14],[3*11+4*13, 3*12+4*14]]
[[37 40]
[85 92]]
```

`numpy.vdot()`ï¼š è¿”å›**ä¸¤ä¸ªå‘é‡çš„ç‚¹ç§¯**ã€‚å¦‚æœç¬¬ä¸€ä¸ªå‚æ•°æ˜¯å¤æ•°ï¼Œé‚£ä¹ˆå®ƒçš„å…±è½­å¤æ•°ä¼šç”¨äºè®¡ç®—ã€‚ å¦‚æœå‚æ•°æ˜¯å¤šç»´æ•°ç»„ï¼Œå®ƒä¼šè¢«å±•å¼€ã€‚

```python
import numpy as np
a = np.array([[1,2],[3,4]])
b = np.array([[11,12],[13,14]])
# vdot å°†æ•°ç»„å±•å¼€è®¡ç®—å†…ç§¯
print (np.vdot(a,b))

1*11 + 2*12 + 3*13 + 4*14 = 130
```

`numpy.linalg.inv()`ï¼š è®¡ç®—**é€†çŸ©é˜µ**ã€‚é€†çŸ©é˜µï¼ˆinverse matrixï¼‰ï¼šè®¾Aæ˜¯æ•°åŸŸä¸Šçš„ä¸€ä¸ªné˜¶çŸ©é˜µï¼Œè‹¥åœ¨ç›¸åŒæ•°åŸŸä¸Šå­˜åœ¨å¦ä¸€ä¸ªné˜¶çŸ©é˜µBï¼Œä½¿å¾—ï¼š AB=BA=E ï¼Œåˆ™æˆ‘ä»¬ç§°Bæ˜¯Açš„é€†çŸ©é˜µï¼Œè€ŒAåˆ™è¢«ç§°ä¸ºå¯é€†çŸ©é˜µã€‚æ³¨ï¼šEä¸ºå•ä½çŸ©é˜µã€‚

```python
import numpy as np

x = np.array([[1,2],[3,4]])
y = np.linalg.inv(x)
print (x)
print (y)
print (np.dot(x,y))
```

`numpy.linalg.solve() `ï¼š æ±‚çŸ©é˜µå½¢å¼çš„çº¿æ€§æ–¹ç¨‹çš„è§£ã€‚

```python
import numpy as np

a = np.array([[1,1,1], [0,2,5],[2,5,-1]]) # ç³»æ•°çŸ©é˜µ
b = np.array([6,-4,27]) # ç³»æ•°çŸ©é˜µ
x = np.linalg.solve(a, b) # æ±‚è§£
print(x)
print(np.dot(a, x)) # éªŒè¯
```

## 4.3ã€pandasæ•°æ®ç»“æ„

### 4.3.1ã€pandasæ¦‚è¿°

Pandas æ˜¯**åŸºäº NumPy** çš„ä¸€ç§å·¥å…· ï¼Œ è¯¥å·¥å…·æ˜¯ä¸ºäº†**è§£å†³æ•°æ®åˆ†æä»»åŠ¡**è€Œåˆ›å»ºçš„ã€‚ Pandas çº³å…¥äº†å¤§é‡åº“å’Œä¸€äº›**æ ‡å‡†çš„æ•°æ®æ¨¡å‹** ï¼Œæä¾›äº†é«˜æ•ˆåœ°æ“ä½œå¤§å‹æ•°æ®é›†æ‰€éœ€çš„å·¥å…·ã€‚ Pandas æä¾›äº†å¤§é‡èƒ½ä½¿æˆ‘ä»¬**å¿«é€Ÿä¾¿æ·åœ°å¤„ç†æ•°æ®çš„å‡½æ•°å’Œæ–¹æ³•**ã€‚ Pandas æ˜¯ Python çš„ä¸€ä¸ªæ•°æ®åˆ†æåŒ… ï¼Œæœ€åˆäº2008 å¹´4 æœˆå¼€å‘ ï¼Œ2009 å¹´åº•å¼€æº ï¼Œç›®å‰ç”± PyData å¼€å‘å›¢é˜Ÿç»§ç»­å¼€å‘å’Œç»´æŠ¤ã€‚Pandas æœ€åˆè¢«ä½œä¸ºé‡‘èæ•°æ®åˆ†æå·¥å…·è€Œå¼€å‘å‡ºæ¥ï¼Œä¹Ÿä¸ºæ—¶é—´åºåˆ—åˆ†ææä¾›äº†å¾ˆå¥½çš„æ”¯æŒã€‚

ä¸€ã€pandas åº“ä»‹ç»

pandas æ˜¯ python ç¬¬ä¸‰æ–¹åº“ï¼Œæä¾›é«˜æ€§èƒ½æ˜“ç”¨æ•°æ®ç±»å‹å’Œåˆ†æå·¥å…·ã€‚åŸºäº numpy å®ç°ï¼Œå¸¸ä¸ numpy å’Œ matplotlib ä¸€åŒä½¿ç”¨ã€‚pandas ä¸­æœ‰ä¸¤å¤§æ ¸å¿ƒæ•°æ®ç»“æ„ï¼š**Series**ï¼ˆä¸€ç»´æ•°æ®ï¼‰ å’Œ **DataFrame**ï¼ˆå¤šç‰¹å¾æ•°æ®ï¼Œæ—¢æœ‰è¡Œç´¢å¼•ï¼Œåˆæœ‰åˆ—ç´¢å¼•ï¼‰

<img src="https://upload-images.jianshu.io/upload_images/19680844-59533769a26b5834.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:60%;" />

Seriesï¼š ä¸€ç»´æ•°ç»„ ï¼Œ ä¸ Numpy ä¸­çš„ä¸€ç»´ array ç±»ä¼¼ ã€‚Seriesã€numpy ä¸­çš„ä¸€ç»´ array ä¸ Python åŸºæœ¬çš„æ•°æ®ç»“æ„ List ä¹Ÿå¾ˆç›¸è¿‘ ï¼Œ å…¶åŒºåˆ«æ˜¯ï¼š List ä¸­çš„å…ƒç´ å¯ä»¥æ˜¯ä¸åŒçš„æ•°æ®ç±»å‹ ï¼Œ è€Œ array å’Œ Series ä¸­åˆ™åªå…è®¸å­˜å‚¨ç›¸åŒçš„æ•°æ®ç±»å‹ ã€‚Series å¯ä»¥æ›´æœ‰æ•ˆçš„ä½¿ç”¨å†…å­˜ ï¼Œæé«˜è¿ç®—æ•ˆç‡ã€‚

Time- Seriesï¼šä»¥æ—¶é—´ä¸ºç´¢å¼•çš„Seriesã€‚

DataFrame ï¼šå¸¦æ ‡ç­¾ä¸”å¤§å°å¯å˜çš„äºŒç»´è¡¨æ ¼å‹æ•°æ®ç»“æ„ï¼Œ å¯ä»¥å°† DataFrame ç†è§£ä¸º Series çš„å®¹å™¨ã€‚

Panel ï¼šä¸‰ç»´çš„æ•°ç»„ï¼Œå¯ä»¥ç†è§£ä¸º DataFrame çš„å®¹å™¨ã€‚

### 4.3.2ã€Series 

Seriesæ˜¯ä¸€ç§ç±»ä¼¼äºä¸€ç»´æ•°ç»„çš„å¯¹è±¡ï¼Œå®ƒç”±ä¸€ç»´æ•°ç»„ï¼ˆå„ç§numpyæ•°æ®ç±»å‹ï¼‰ä»¥åŠä¸€ç»„ä¸ä¹‹ç›¸å…³çš„æ•°æ®æ ‡ç­¾ï¼ˆå³ç´¢å¼•ï¼‰ç»„æˆã€‚

Seriesåˆ›å»ºå‡½æ•°ï¼š`pandas.Series( data, index, dtype, copy)`

![image-20200122100004015](C:\Users\12970\AppData\Roaming\Typora\typora-user-images\image-20200122100004015.png)

å¯ä½¿ç”¨ Python æ•°ç»„ã€numpy æ•°ç»„åˆ›å»ºã€python å­—å…¸åˆ›å»ºã€‚

**æ³¨æ„**ï¼šä¸å­—å…¸ä¸åŒçš„æ˜¯ï¼šSeries**å…è®¸ç´¢å¼•é‡å¤**

Seriesçš„å­—ç¬¦ä¸²è¡¨ç°å½¢å¼ä¸ºï¼šç´¢å¼•åœ¨å·¦è¾¹ï¼Œå€¼åœ¨å³è¾¹ã€‚å¦‚æœæ²¡æœ‰ä¸ºæ•°æ®æŒ‡å®šç´¢å¼•ï¼Œåˆ™è‡ªåŠ¨åˆ›å»ºä¸€ä¸ª0åˆ°N-1ï¼ˆNä¸ºæ•°æ®çš„é•¿åº¦ï¼‰çš„æ•´æ•°å‹ç´¢å¼•ã€‚å¯ä»¥é€šè¿‡Seriesçš„valueså’Œindexå±æ€§è·å–å…¶æ•°ç»„è¡¨ç¤ºå½¢å¼å’Œç´¢å¼•å¯¹è±¡ã€‚

```python
>>> obj = pd.Series([4, 7, -5, 3])
>>> obj.values
array([ 4, 7, -5, 3], dtype=int64)
>>> obj.index
RangeIndex(start=0, stop=4, step=1)
>>> obj[2]
-5
>>> obj[1] = 8
>>> obj[[0, 1, 3]]
0 4
1 8
3 3
dtype: int64
```

é€šå¸¸å¸Œæœ›æ‰€åˆ›å»ºçš„ Series å¸¦æœ‰ä¸€ä¸ªå¯ä»¥å¯¹å„ä¸ªæ•°æ®ç‚¹è¿›è¡Œæ ‡è®°çš„ç´¢å¼•ã€‚ä¸æ™®é€š NumPy æ•°ç»„ç›¸æ¯” ï¼Œ å¯ä»¥é€šè¿‡ç´¢å¼•çš„æ–¹å¼é€‰å– Series ä¸­çš„å•ä¸ªæˆ–ä¸€ç»„å€¼ã€‚

```python
>>> obj2 =pd.Series([4,2,-5, 3 ],index=['a','b','c','dâ€™])
>>> obj2
a 4
b 2
c -5
d 3
dtype: int64
>>> obj2['a']
4
>>> obj2['d'] = 6
>>> obj2
a 4
b 2
c -5
d 6
dtype: int64
>>> obj2[['a','b','d']]
a 4
b 2
d 6
dtype: int64
```

Seriesä¸­å¾ˆé‡è¦çš„ä¸€ä¸ªåŠŸèƒ½æ˜¯ï¼šå®ƒä¼š**åœ¨ç®—æœ¯è¿ç®—ä¸­è‡ªåŠ¨å¯¹é½ä¸åŒç´¢å¼•çš„æ•°æ®**

```python
>>> obj2 = pd.Series({"Ohio": 35000, "Oregon": 16000, "Texas": 71000, "Utah": 5000})
>>> obj3 = pd.Series({"California": np.nan, "Ohio": 35000, "Oregon": 16000, "Texas": 71000})

>>> obj2 + obj3
California NaN
Ohio 70000.0
Oregon 32000.0
Texas 142000.0
Utah NaN
dtype: float64
```

Series å¯¹è±¡æœ¬èº«åŠå…¶ç´¢å¼•éƒ½æœ‰ä¸€ä¸ª name å±æ€§ã€‚Series çš„ç´¢å¼•å¯ä»¥é€šè¿‡èµ‹å€¼çš„æ–¹å¼å°±åœ°ä¿®æ”¹ã€‚

```python
>>> obj3.name= 'population'
>>> obj3.index.name = 'state'
>>> obj3
state
California NaN
Ohio 35000.0
Oregon 16000.0
Texas 71000.0
Name: population, dtype: float64

>>> obj = pd.Series([4, 7, -5, 3])
>>> obj.index = ['Bob', 'Steve', 'Jeff', 'Ryan']
>>> obj
Bob 4
Steve 7
Jeff -5
Ryan 3
dtype: int64
```

### 4.3.3ã€DataFrame 

DataFrame æ˜¯ä¸€ä¸ª**è¡¨æ ¼å‹çš„æ•°æ®ç»“æ„**ï¼Œå®ƒå«æœ‰ä¸€ç»„æœ‰åºçš„åˆ—ï¼Œæ¯åˆ—å¯ä»¥æ˜¯ä¸åŒçš„å€¼ç±»å‹ï¼ˆæ•°å€¼ã€å­—ç¬¦ä¸²ã€å¸ƒå°”å€¼ç­‰ï¼‰ã€‚DataFrame æ—¢æœ‰è¡Œç´¢å¼•ä¹Ÿæœ‰åˆ—ç´¢å¼•ï¼Œå®ƒå¯ä»¥è¢«çœ‹åšç”± Series ç»„æˆçš„å­—å…¸ï¼ˆå…±ç”¨åŒä¸€ä¸ªç´¢å¼•ï¼‰ã€‚è·Ÿå…¶ä»–ç±»ä¼¼çš„æ•°æ®ç»“æ„ç›¸æ¯”ï¼ˆå¦‚Rè¯­è¨€çš„ data.frame ï¼‰ï¼ŒDataFrame ä¸­é¢å‘è¡Œå’Œé¢å‘åˆ—çš„æ“ä½œåŸºæœ¬ä¸Šæ˜¯å¹³è¡¡çš„ã€‚DataFrame ä¸­çš„æ•°æ®æ˜¯ä»¥ä¸€ä¸ªæˆ–å¤šä¸ªäºŒç»´å—å­˜æ”¾çš„ï¼ˆè€Œä¸æ˜¯åˆ—è¡¨ã€å­—å…¸æˆ–åˆ«çš„ä¸€ç»´æ•°æ®ç»“æ„ï¼‰

![image.png](https://upload-images.jianshu.io/upload_images/19680844-d50892a605fc6ea9.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

DataFrameç‰¹ç‚¹ï¼š

1ï¼‰æ½œåœ¨çš„åˆ—æ˜¯ä¸åŒçš„ç±»å‹

2ï¼‰å¤§å°å¯å˜

3ï¼‰æ ‡è®°è½´( ( è¡Œå’Œåˆ—) )

4ï¼‰å¯ä»¥å¯¹è¡Œå’Œåˆ—æ‰§è¡Œç®—æœ¯è¿ç®—

DataFrameæ„é€ å‡½æ•°ï¼š`pandas.DataFrame( data, index, columns, dtype, copy)`

![image.png](https://upload-images.jianshu.io/upload_images/19680844-f66dda5d8483f4d0.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

åˆ›å»ºä¸€ä¸ªç©ºçš„DataFrameï¼šå‡½æ•°ä¸æŒ‡å®šå‚æ•°è¿”å›ç©ºDataFrame

```python
# åˆ›å»ºä¸€ä¸ªç©ºçš„DataFrame
import pandas as pd
df = pd.DataFrame()
print(df)
```

ä»åˆ—è¡¨åˆ›å»ºDataFrame

```python
# ä»å•ä¸ªåˆ—è¡¨åˆ›å»ºDataFrame
data = [1,2,3,4]
df = pd.DataFrame(data)
print(df)

# ä»åµŒå¥—åˆ—è¡¨åˆ›å»ºDataFrameã€å¹¶æŒ‡å®šæ•°æ®ç±»å‹
data = [['Alex',10],['Bob',12],['Clarke',13]]
df = pd.DataFrame(data,columns=['Name','Age'],dtype=float)
print(df)
```

ç”±ç­‰é•¿åˆ—è¡¨æˆ– numpy æ•°ç»„ç»„æˆçš„å­—å…¸åˆ›å»º DataFrameã€‚DataFrame ç»“æœä¼šè‡ªåŠ¨åŠ ä¸Šç´¢å¼•ï¼ˆè·ŸSeries ä¸€æ ·ï¼‰ï¼Œä¸”å…¨éƒ¨ä¼šè¢«æœ‰åºæ’åˆ—ã€‚

```python
>>> data = {'state': ['Ohio', 'Ohio', 'Ohio', 'Nevada', 'Nevada'], 'year': [2000
, 2001, 2002, 2001, 2002], 'pop': [1.5, 1.7, 3.6, 2.4, 2.9]}
>>> frame = pd.DataFrame(data)
>>> frame

 state year pop
0 Ohio 2000 1.5
1 Ohio 2001 1.7
2 Ohio 2002 3.6
3 Nevada 2001 2.4
4 Nevada 2002 2.9
```

å¦‚æœæŒ‡å®šäº†åˆ—é¡ºåºï¼Œåˆ™ DataFrame çš„åˆ—å°±ä¼šæŒ‰ç…§æŒ‡å®šé¡ºåºè¿›è¡Œæ’åˆ—ã€‚è·ŸåŸSeriesä¸€æ ·ï¼Œå¦‚æœä¼ å…¥çš„åˆ—åœ¨æ•°æ®ä¸­æ‰¾ä¸åˆ°ï¼Œå°±ä¼šäº§ç”ŸNANå€¼

```python
>>> pd.DataFrame(data,
columns=['year', 'state', 'pop'])

 year state pop
0 2000 Ohio 1.5
1 2001 Ohio 1.7
2 2002 Ohio 3.6
3 2001 Nevada 2.4
4 2002 Nevada 2.9

>>> frame2 = pd.DataFrame(data, columns=['year', 'state', 'pop', 'debt'],
index=['one', 'two', 'three', 'four', 'five'])
>>> frame2

year state pop debt
one 2000 Ohio 1.5 NaN
two 2001 Ohio 1.7 NaN
three 2002 Ohio 3.6 NaN
four 2001 Nevada 2.4 NaN
five 2002 Nevada 2.9 NaN

>>> frame2.columns
Index(['year', 'state', 'pop', 'debt'], dtype='object')
```

é€šè¿‡ç±»ä¼¼å­—å…¸æ ‡è®°çš„æ–¹å¼æˆ–å±æ€§çš„æ–¹å¼ï¼Œå¯ä»¥å°† DataFrame çš„åˆ—è·å–ä¸ºä¸€ä¸ª Series ã€‚è¿”å›çš„ Seriesæ‹¥æœ‰åŸ DataFrame ç›¸åŒçš„ç´¢å¼•ï¼Œä¸”å…¶ name å±æ€§ä¹Ÿå·²ç»è¢«ç›¸åº”åœ°è®¾ç½®å¥½äº†ã€‚

```python
>>> frame2['state']
one Ohio
two Ohio
three Ohio
four Nevada
five Nevada
Name: state, dtype: object
        
>>> frame2['year']
one 2000
two 2001
three 2002
four 2001
five 2002
Name: year, dtype: int64
```

åˆ—å¯ä»¥é€šè¿‡èµ‹å€¼çš„æ–¹å¼è¿›è¡Œä¿®æ”¹ã€‚ä¾‹å¦‚ï¼Œç»™é‚£ä¸ªç©ºçš„ â€œdeltâ€ åˆ—èµ‹ä¸Šä¸€ä¸ªæ ‡é‡å€¼æˆ–ä¸€ç»„å€¼

```python
>>> frame2['debt'] = 16.5
>>> frame2

   year state pop debt
one 2000 Ohio 1.5 16.5
two 2001 Ohio 1.7 16.5
three 2002 Ohio 3.6 16.5
four 2001 Nevada 2.4 16.5
five 2002 Nevada 2.9 16.5

>>> frame2['debt'] = np.arange(5.)
>>> frame2

   year state pop debt
one 2000 Ohio 1.5 0.0
two 2001 Ohio 1.7 1.0
three 2002 Ohio 3.6 2.0
four 2001 Nevada 2.4 3.0
five 2002 Nevada 2.9 4.0
```

å°†åˆ—è¡¨æˆ–æ•°ç»„èµ‹å€¼ç»™æŸä¸ªåˆ—æ—¶ï¼Œå…¶é•¿åº¦å¿…é¡»è·Ÿ DataFrame çš„**é•¿åº¦ç›¸åŒ¹é…**ã€‚å¦‚æœèµ‹å€¼çš„æ˜¯ä¸€ä¸ª Series ï¼Œå°±ä¼šç²¾ç¡®åŒ¹é… DataFrame çš„ç´¢å¼•ï¼Œæ‰€æœ‰ç©ºä½éƒ½å°†è¢«å¡«ä¸Šç¼ºå¤±å€¼ã€‚

```python
>>> val = pd.Series([-1.2, -1.5, -1.7], index=['two', 'four', 'five'])
>>> frame2['debt'] = val
>>> frame2

  year state pop debt
one 2000 Ohio 1.5 NaN
two 2001 Ohio 1.7 -1.2
three 2002 Ohio 3.6 NaN
four 2001 Nevada 2.4 -1.5
five 2002 Nevada 2.9 -1.7
```

ä¸ºä¸å­˜åœ¨çš„åˆ—èµ‹å€¼ä¼šåˆ›å»ºå‡ºä¸€ä¸ªæ–°åˆ—ï¼Œå…³é”®å­— del ç”¨äºåˆ é™¤åˆ—ã€‚

```python
>>> frame2['eastern'] = frame2.state == 'Ohio'
>>> frame2

 year state pop debt eastern
one 2000 Ohio 1.5 NaN True
two 2001 Ohio 1.7 -1.2 True
three 2002 Ohio 3.6 NaN True
four 2001 Nevada 2.4 -1.5 False
five 2002 Nevada 2.9 -1.7 False

>>> del frame2['eastern']
>>> frame2.columns
Index(['year', 'state', 'pop', 'debt'], dtype='object')
```

å°†åµŒå¥—å­—å…¸ï¼ˆä¹Ÿå°±æ˜¯å­—å…¸çš„å­—å…¸ï¼‰ä¼ ç»™ DataFrame ï¼Œå®ƒå°±ä¼šè¢«è§£é‡Šä¸ºï¼š**å¤–å±‚å­—å…¸çš„é”®ä½œä¸ºåˆ—ï¼Œå†…å±‚é”®åˆ™ä½œä¸ºè¡Œç´¢å¼•**ã€‚ä¹Ÿå¯ä»¥å¯¹ä¸Šè¿°ç»“æœè¿›è¡Œè½¬ç½®

```python
>>> pop = {'Nevada': {2001: 2.4, 2002: 2.9}, 'Ohio':
{2000: 1.5, 2001: 1.7, 2002: 3.6}}
>>> frame3 = pd.DataFrame(pop)
>>> frame3
   Nevada Ohio
2000 NaN 1.5
2001 2.4 1.7
2002 2.9 3.6

>>> frame3.T
   2000 2001 2002
Nevada NaN 2.4 2.9
Ohio 1.5 1.7 3.6
```

å¦‚æœè®¾ç½®äº† DataFrame çš„ index å’Œ columns çš„ name å±æ€§ï¼Œåˆ™è¿™äº›ä¿¡æ¯ä¹Ÿä¼šè¢«æ˜¾ç¤ºå‡ºæ¥

```python
>>> frame3.index.name = 'year'
>>> frame3.columns.name = 'state'
>>> frame3
state Nevada Ohio
year
2000 NaN 1.5
2001 2.4 1.7
2002 2.9 3.6
```

è·Ÿ Series ä¸€æ ·ï¼Œvalues å±æ€§ä¹Ÿä¼šä»¥äºŒç»´ ndarray çš„å½¢å¼è¿”å› DataFrame ä¸­çš„æ•°æ®ã€‚å¦‚æœ DataFrame å„åˆ—çš„æ•°æ®ç±»å‹ä¸åŒï¼Œåˆ™æ•°ç»„çš„æ•°æ®ç±»å‹å°±ä¼šé€‰ç”¨èƒ½å…¼å®¹æ‰€æœ‰åˆ—çš„æ•°æ®ç±»å‹ã€‚

```python
>>> frame3.values
array([[nan, 1.5],
[2.4, 1.7],
[2.9, 3.6]])

>>> frame2.values
array([[2000, 'Ohio', 1.5, nan],
[2001, 'Ohio', 1.7, -1.2],
[2002, 'Ohio', 3.6, nan],
[2001, 'Nevada', 2.4, -1.5],
[2002, 'Nevada', 2.9, -1.7]], dtype=object)
```

## 4.4ã€pandaså¸¸ç”¨æ–¹æ³• 

### 4.4.1ã€æ•°æ®è¯»å–ä¸å†™å…¥

Pandas æ”¯æŒå¸¸ç”¨çš„æ–‡æœ¬æ ¼å¼æ•°æ®(csvã€jsonã€htmlã€å‰ªè´´æ¿)ã€äºŒè¿›åˆ¶æ•°æ®(excelã€hdf5 æ ¼å¼ã€Feather æ ¼å¼ã€Parquet æ ¼å¼ã€Msgpackã€Stataã€SASã€pkl)ã€SQL æ•°æ®(SQLã€è°·æ­Œ BigQuery äº‘æ•°æ®)ç­‰.

 ä¸€èˆ¬æƒ…å†µä¸‹ ï¼Œ è¯»å–æ–‡ä»¶çš„æ–¹æ³•ä»¥ pd.read_ å¼€å¤´ ï¼Œ è€Œå†™å…¥æ–‡ä»¶çš„æ–¹æ³•ä»¥ pd.to_å¼€å¤´.

![image.png](https://upload-images.jianshu.io/upload_images/19680844-1121b5645e3d83e8.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)

æ•°æ®è¯»å–å‡½æ•° read_csv ç¤ºä¾‹

è‡ªå®šä¹‰ç´¢å¼•ï¼šå¯ä»¥æŒ‡å®š csv æ–‡ä»¶ä¸­çš„ä¸€åˆ—æ¥ä½¿ç”¨ index_col å®šåˆ¶ç´¢å¼•ã€‚dtypeï¼šæ•°æ®ç±»å‹è½¬æ¢ã€‚ skiprowsï¼šè·³è¿‡æŒ‡å®šçš„è¡Œæ•°ã€‚

```python
df=pd.read_csv("temp.csv")
print(df)

df = pd.read_csv("temp.csv", dtype={'Salary':
np.float64})
print(df)
print(df.dtypes)

df=pd.read_csv("temp.csv", names=['a', 'b',
'c','d','e'])
print(df)

df=pd.read_csv("temp.csv", skiprows=2)
print (df)
```

### 4.4.2ã€æè¿°æ€§ç»Ÿè®¡æ–¹æ³•

 Pandas æä¾› äº†å‡ ä¸ªç»Ÿè®¡å’Œæè¿°æ€§æ–¹æ³•ï¼Œæ–¹ä¾¿ä½ ä»å®è§‚çš„è§’åº¦å»äº†è§£æ•°æ®é›†ï¼Œä¾‹å¦‚ count()  ç”¨äºç»Ÿè®¡éç©ºæ•°æ®çš„æ•°é‡ã€‚

é™¤äº†ç»Ÿè®¡ç±»çš„æ–¹æ³•ï¼ŒPandas è¿˜æä¾›äº†å¾ˆå¤šè®¡ç®—ç±»çš„æ–¹æ³•ï¼Œæ¯”å¦‚ sum() ç”¨äºè®¡ç®—æ•°å€¼æ•°æ®çš„æ€»å’Œï¼›mean() ç”¨ äº è®¡ ç®— æ•° å€¼ æ•° æ® çš„ å¹³ å‡ å€¼ ï¼›median()  ç”¨äºè®¡ç®—æ•°å€¼æ•°æ®çš„ç®—æœ¯ä¸­å€¼ã€‚

<img src="https://upload-images.jianshu.io/upload_images/19680844-b4df1e19ed27412c.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240" alt="image.png" style="zoom:67%;" />

ç¤ºä¾‹ï¼š

sum()ï¼šæ±‚å’Œï¼›mean() ï¼šæ±‚ä¸­å€¼ï¼›std()ï¼šæ±‚æ ‡å‡†å·®ï¼›describe()ï¼šæè¿°æ€§ç»Ÿè®¡ä¿¡æ¯æ‘˜è¦ã€‚

```python
d = {'Name':pd.Series(['Tom','James','Ricky','Vin','Steve','Minsu','Jack',
'Lee','David','Gasper','Betina','Andres']),
'Age':pd.Series([25,26,25,23,30,29,23,34,40,30,51,46]),
'Rating':pd.Series([4.23,3.24,3.98,2.56,3.20,4.6,3.8,3.78,2.98,4.80,4.10,3.65])}

#Create a DataFrame
df = pd.DataFrame(d)
print(df, '\n')
print(df.sum(), '\n') # åˆ—æ±‚å’Œï¼Œ é»˜è®¤axis=0
print(df.sum(1), '\n') # è¡Œæ±‚å’Œï¼Œaxis=1
print(df.mean(), '\n') # æ±‚å‡å€¼
print(df.std(), '\n') # æ ‡å‡†å·®
print(df.describe(include=['number'])) # ç»Ÿè®¡ä¿¡æ¯æ‘˜è¦
```

### 4.4.3ã€è¿­ä»£ä¸éå†

pandaså¯¹è±¡ä¹‹é—´çš„åŸºæœ¬è¿­ä»£çš„è¡Œä¸ºå–å†³äºç±»å‹ã€‚å½“è¿­ä»£ä¸€ä¸ªç³»åˆ—æ—¶ï¼Œå®ƒè¢«è§†ä¸ºæ•°ç»„å¼ï¼ŒåŸºæœ¬è¿­ä»£äº§ç”Ÿè¿™äº›å€¼ã€‚å…¶ä»–æ•°æ®ç»“æ„ï¼Œå¦‚ï¼šDataFrameï¼Œéµå¾ªç±»ä¼¼æƒ¯ä¾‹è¿­ä»£å¯¹è±¡çš„é”®ã€‚

ç®€è€Œè¨€ä¹‹ï¼ŒåŸºæœ¬è¿­ä»£ï¼ˆå¯¹äº i åœ¨å¯¹è±¡ä¸­ï¼‰äº§ç”Ÿï¼š Series - å€¼ï¼› DataFrame - åˆ—æ ‡ç­¾

è¦éå†æ•°æ®å¸§ ( DataFrame ) ä¸­çš„è¡Œï¼Œå¯ä»¥ä½¿ç”¨ä»¥ä¸‹å‡½æ•°ï¼šiteritems() â€”â€” è¿­ä»£ ( keyï¼Œvalue ) å¯¹ï¼› iterrows() â€”â€”å°†è¡Œè¿­ä»£ä¸º(ç´¢å¼•ï¼Œç³»åˆ—)å¯¹ï¼› itertuples() â€”â€” ä»¥ namedtuples çš„å½¢å¼è¿­ä»£è¡Œ

è¿­ä»£ DataFrame

```python
N=5
df = pd.DataFrame({
'D': pd.date_range(start='2019-01-01',periods=N,freq='M'),
'x': np.linspace(0,stop=N-1,num=N),
'y': np.random.rand(N),
'z': np.random.choice(['Low','Medium','High'],N).tolist(),
})
print(df,'\n')
for col in df:
print(col)
```

éå† Dataframe 

1ï¼‰ iteritemsï¼ˆï¼‰:å°†ç´¢å¼•å’Œå€¼ä½œä¸ºé”®å’Œåˆ—å€¼è¿­ä»£ä¸ºSerieså¯¹è±¡ã€‚ 2ï¼‰iterrows()è¿”å›è¿­ä»£å™¨ï¼Œäº§ç”Ÿæ¯ä¸ªç´¢å¼•å€¼ä»¥åŠåŒ…å«æ¯è¡Œæ•°æ®çš„åºåˆ—ã€‚ 3ï¼‰itertuples() æ–¹æ³•å°†ä¸º DataFrame ä¸­çš„æ¯ä¸€è¡Œè¿”å›ä¸€ä¸ªäº§ç”Ÿä¸€ä¸ªå‘½åå…ƒç»„çš„è¿­ä»£å™¨ã€‚å…ƒç»„çš„ç¬¬ä¸€ä¸ªå…ƒç´ å°†æ˜¯è¡Œçš„ç›¸åº”ç´¢å¼•å€¼ï¼Œè€Œå‰©ä½™çš„å€¼æ˜¯è¡Œå€¼ã€‚

```python
df = pd.DataFrame(np.random.randn(4,3),columns=['col1','col2','col3â€™])
for key,value in df.iteritems():
	print (key,value)
  
for row_index,row in df.iterrows():
	print (row_index,row)
  
for row in df.itertuples():
	print (row)
```

### 4.4.4ã€æ’åº

æŒ‰ç´¢å¼•æ’åºï¼šä½¿ç”¨`sort_index()`æ–¹æ³•ï¼Œé€šè¿‡ä¼ é€’axiså‚æ•°å’Œæ’åºé¡ºåºï¼Œå¯ä»¥å¯¹DataFrameè¿›è¡Œæ’åºã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼ŒæŒ‰ç…§å‡åºå¯¹è¡Œæ ‡ç­¾è¿›è¡Œæ’åºã€‚

æŒ‰æ•°å€¼æ’åºï¼šsort_values() æ˜¯æŒ‰å€¼æ’åºçš„æ–¹æ³•ã€‚å®ƒæ¥å—ä¸€ä¸ªbyå‚æ•°ï¼Œå®ƒå°†ä½¿ç”¨è¦ä¸å…¶æ’åºå€¼çš„DataFrame çš„åˆ—åç§°ã€‚

æ’åºé¡ºåºï¼šé€šè¿‡å°†å¸ƒå°”å€¼ä¼ é€’ç»™å‡åºå‚æ•° ascending ï¼Œå¯ä»¥æ§åˆ¶æ’åºé¡ºåºã€‚

æŒ‰è¡Œæˆ–åˆ—æ’åºï¼šé€šè¿‡è®¾ç½® axis å‚æ•°ä¸º 0 æˆ– 1ï¼Œä¸º 0 æ—¶é€è¡Œæ’åºï¼Œä¸º 1 æ—¶é€åˆ—æ’åºï¼Œé»˜è®¤ä¸º 0 ã€‚

```python
unsorted_df = pd.DataFrame(np.random.rand(10,2),index=[1,4,6,2,3,5,9,8,0,7],columns =
['A','B'])
print(unsorted_df,'\n')

sorted_df=unsorted_df.sort_index(ascending = True) #æŒ‰ç´¢å¼•æ’åº
print (sorted_df,'\n')

sorted_df = unsorted_df.sort_values(by='B') # æŒ‰'B'åˆ—çš„å€¼è¿›è¡Œæ’åº
print (sorted_df,'\n')
```

### 4.4.5ã€ç¼ºå¤±å€¼å¤„ç†

ç¼ºå¤±å€¼ä¸»è¦æ˜¯æŒ‡æ•°æ®ä¸¢å¤±çš„ç°è±¡ ï¼Œ ä¹Ÿå°±æ˜¯æ•°æ®é›†ä¸­çš„æŸä¸€å—æ•°æ®ä¸å­˜åœ¨ã€‚é™¤äº†åŸå§‹æ•°æ®é›†å°±å·²ç»å­˜åœ¨ç¼ºå¤±å€¼ä»¥å¤– ï¼Œå½“æˆ‘ä»¬ç”¨åˆ°ç´¢å¼•å¯¹é½ï¼ˆ reindex () ï¼Œé€‰æ‹©ç­‰ ï¼‰æ–¹æ³•æ—¶ ï¼Œä¹Ÿå®¹æ˜“äººä¸ºå¯¼è‡´ç¼ºå¤±å€¼çš„äº§ç”Ÿã€‚

ç¼ºå¤±å€¼å¤„ç†åŒ…æ‹¬ï¼šç¼ºå¤±å€¼æ ‡è®°ï¼› ç¼ºå¤±å€¼å¡«å……ï¼›ç¼ºå¤±å€¼æ’å€¼

Pandas ä¸ºäº†æ›´æ–¹ä¾¿åœ°æ£€æµ‹ç¼ºå¤±å€¼ ï¼Œ å°†ä¸åŒç±»å‹æ•°æ®çš„ç¼ºå¤±å‡é‡‡ç”¨ NaN æ ‡è®° ã€‚ è¿™é‡Œçš„ NaN ä»£è¡¨t Not a Number ï¼Œ å®ƒä»…ä»…æ˜¯ä½œä¸ºä¸€ä¸ªæ ‡è®°ã€‚

Pandas ä¸­ç”¨äºæ ‡è®°ç¼ºå¤±å€¼ä¸»è¦ç”¨åˆ°ä¸¤ä¸ªæ–¹æ³• ï¼Œåˆ†åˆ«æ˜¯ï¼š`isnull () `å’Œ `notnull ()` ï¼Œé¡¾åæ€ä¹‰å°±æ˜¯ã€Œ æ˜¯ç¼ºå¤±å€¼ ã€å’Œã€Œ ä¸æ˜¯ç¼ºå¤±å€¼ ã€ã€‚é»˜è®¤ä¼šè¿”å›å¸ƒå°”å€¼ç”¨äºåˆ¤æ–­ã€‚

```python
# ä½¿ç”¨reindex()äººä¸ºç”Ÿæˆç¼ºå¤±å€¼
df = pd.DataFrame(np.random.rand(4, 3), index=['a', 'c', 'e', 'f'],columns=['one', 'two', 'three'])

df = df.reindex(['a', 'b', 'c', 'd', 'e', 'f', 'g'])

print (df,'\n')
print(df['one'].isnull(),'\n') # ç¼ºå¤±å€¼æ ‡è®°
print (df['one'].notnull(),'\n')
```

Pandas æä¾›äº†å„ç§æ–¹æ³•æ¥æ¸…é™¤ç¼ºå¤±çš„å€¼ã€‚`fillna()`å‡½æ•°å¯ä»¥é€šè¿‡å‡ ç§æ–¹æ³•ç”¨éç©ºæ•°æ®â€œå¡«å……â€NaNå€¼ã€‚

 ç”¨æ ‡é‡å€¼æ›¿æ¢NaN`print (df.fillna(0))`

 å‘å‰å¡«å……ï¼špad/fillï¼Œ å‘åå¡«å……ï¼šbfill/backfill

`print (df.fillna(method='padâ€™))`ï¼›`print (df.fillna(method='backfill'))`

ä¸¢å¼ƒç¼ºå°‘çš„å€¼ï¼šå¦‚æœåªæƒ³æ’é™¤ç¼ºå°‘çš„å€¼ï¼Œåˆ™ä½¿ç”¨ dropna å‡½æ•°å’Œ axis å‚æ•°ã€‚ é»˜è®¤æƒ…å†µä¸‹ï¼Œaxis = 0ï¼Œå¦‚æœè¡Œå†…çš„ä»»ä½•å€¼æ˜¯ NaNï¼Œé‚£ä¹ˆæ•´ä¸ªè¡Œè¢«åˆ é™¤ã€‚

```python
#ä¸¢å¼ƒå«NaNå€¼çš„è¡Œ
print(df.dropna())
#ä¸¢å¼ƒå«NaNå€¼çš„åˆ—
print (df.dropna(axis=1)) 
```

æ›¿æ¢ç¼ºå¤±ï¼ˆæˆ–é€šç”¨ï¼‰å€¼ï¼šç”¨ä¸€äº›å…·ä½“çš„å€¼å–ä»£ä¸€ä¸ªé€šç”¨çš„å€¼æˆ–ç¼ºå¤±å€¼ã€‚ç”¨æ ‡é‡æ›¿æ¢ NaN å’Œä½¿ç”¨fillna() å‡½æ•°ç­‰æ•ˆã€‚

```python
df = pd.DataFrame({'one':[10,20,30,40,50,2000],'two':[1000,0,30,40,50,60]})
print(df,'\n')
print(df.replace({1000:10,2000:60}))
```

